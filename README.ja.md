[EN](./README.md) | JA

# withExEditor
コンテキストメニュー（右クリック）から、お好みのエディタを使用して、「ソース表示」「選択部分のソース表示」、または「テキスト編集」ができるようになります。
(X)HTML、JavaScript、CSS、SVG、XMLなどで使用可能です。

## アドオンのページ
[withExEditor :: Add-ons for Firefox](https://addons.mozilla.org/ja/firefox/addon/withexeditor/ "withExEditor :: Add-ons for Firefox")

## 使用方法

### ページのソースを *exEditor* で表示
* 一時ファイルを作成し、外部エディタで開きます。
* 元々のドキュメントがUTF-8以外でも、一時ファイルはUTF-8でエンコードされています。
* ローカルファイルを参照している場合、直接、そのローカルファイルを開きます。

### MathML のソースを *exEditor* で表示
* MathMLの要素上で有効になり、DOMツリーを生成してMathMLで表示します。属性の出現順など、ソースのDOMツリーとは必ずしも一致しない場合があります。

### 選択した部分のソースを *exEditor* で表示
* 選択部分のDOMツリーを生成してXMLで表示します。属性の出現順など、ソースのDOMツリーとは必ずしも一致しない場合があります。
* 複数の選択部分があった場合、選択部分ごとに区切りとしてコメントを入れて表示します。
* 選択部分がDOMで解析不能な場合は、選択部分のみを含んだファイルを生成して表示します。

### テキストを *exEditor* で編集
* input要素、textarea要素や編集可能な要素上で有効になります。
* エディタで編集・保存した内容は、ブラウザに戻って元の要素にフォーカスを移すと同期されます。

***

## アドオンマネージャでの設定項目

### エディタの選択
* 使用するエディタを登録します。
* Mac OS Xでは、 `/Applications/[yourEditor].app/Contents/MacOS/` 内にあるファイルを選択してください。

### コマンドラインオプション
* エディタのコマンドラインオプションを設定します。
* バックスラッシュ（`\`）文字にはバックスラッシュを加えてエスケープさせておく必要があります。
例: `C:\\Windows`
* 空白が含まれる場合は二重引用符（`"`）で囲ってください。
例: `"Some Arg"`

### シェルでコマンドを実行
* シェルを起動し、そのシェル内でコマンドを実行します。
* 基本的には `editorPath filePath cmdArgs` の形でエディタを起動します。そうではなく、例えばファイルパスの前にも何らかの引数を置きたい場合などには、このオプションを有効化して、そのような内容のシェルスクリプト（バッチファイル）を作成し、エディタの代わりにそのシェルスクリプトを選択してみてください。  
例: sample.cmd
```
@echo off
start "" "C:\Program Files\SomeEditor\Editor.exe" /arg %*
```

### アクセスキー
* コンテキストメニュー、ツールバーボタンのオプションパネルのショートカット、および直接エディタを実行するためのショートカットで共通して使用するアクセスキーを設定します。
* アクセスキーは任意の値に変更可能です。ただし、一文字である必要があります。
* コンテキストメニューでは設定した「キー」をそのまま押してください。

### オプションパネルを開閉するショートカットキーを有効化
* ツールバーボタンからパネルを開閉するには「`Ctrl + Alt + キー`」（Macは「`Cmd + Opt + キー`」）を押してください。

### エディタを直接起動するショートカットキーを有効化
* コンテキストメニューを経由せずにエディタを直接起動するには「`Ctrl + Shift + キー`」（Macは「`Cmd + Shift + キー`」）を押してください。

### プライベートブラウジング中も有効化
* チェックを入れると有効、チェックを外すと無効です。

### テキスト編集のみ有効化
* コンテンツが編集可能な場合にのみ、コンテキストメニューに表示されます。

### 一時ファイルを強制的に削除
* プライベートブラウジングの終了時やブラウザの終了時に一時ファイルを強制的に削除します。
* チェックを入れておくことを推奨しますが、エディタの設定によっては強制削除を有効にすると不具合が起こる可能性があります。

### その他のオプション
* オプションパネルからその他のオプションをカスタマイズすることができます。

***

## ツールバーボタンでの設定項目
* アイコンの色を変更したり、エディタの表示名を変更できます。また、ここからアドオンマネージャを開くことができます。

***

## エラー・警告の通知について
以下の状況でエラーまたは警告が通知されます。
* 外部エディタの起動に失敗した場合。
* プライベートブラウジングの終了時に一時ファイルの削除に失敗した場合。
